---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# mtrx

[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://www.tidyverse.org/lifecycle/#experimental)

The goal of `mtrx` is to provide a simpler matrix class in R, similar in spirit
to `tibble`.

Eventually, it would be great if mtrx objects had broadcasting semantics, 
similar to what is done in Numpy.

It would also be neat to have a `dplyr`-ish interface on top of them.

**This is just an experiment, and this package should not be used for anything meaningful.**

## Installation

You can install from Github with:

```{r, eval = FALSE}
devtools::install_github("DavisVaughan/mtrx")
```


## Creation

```{r}
library(mtrx)
```


Create `mtrx` object by either coercing existing objects to `mtrx` or
by using the helpful constructor, `mtrx()`.

```{r}
# Coercion
mat <- matrix(1:10, nrow = 5, dimnames = list(NULL, c("a", "b")))

as_mtrx(mat)
```

The constructor takes multiple vectors in `...`, where each element is a column
of the matrix, possibly named.

```{r}
mtrx_ex <- mtrx(1:5 + 0, a = 6:10 + 0)

mtrx_ex
```

mtrx objects have the same slicing semantics as tibbles. Dimensions are never
dropped.

```{r}
# first column
mtrx_ex[1]

# first row
mtrx_ex[1,]

# second column by name
mtrx_ex["a"]

# individual elements
mtrx_ex[1, "a"]
```

Broadcast arithmetic is partially available through `xtensor`.

```
(5, 2)
(5, 1)
------
(5, 2)
```

```{r, error=TRUE}
col_a <- mtrx_ex["a"]
col_a

mtrx_ex + col_a

# Note that you cant do this in base R
as_matrix(mtrx_ex) + as_matrix(col_a)
```

Outer sums are incredibly simple with this broadcast syntax.

```
(5, 1)
(1, 5)
------
(5, 5)
```


```{r}
col_a + t(col_a)
```

